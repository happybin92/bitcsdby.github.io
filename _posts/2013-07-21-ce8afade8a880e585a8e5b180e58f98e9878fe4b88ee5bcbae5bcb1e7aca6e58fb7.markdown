---
author: bydiao
comments: true
date: 2013-07-21 14:29:03+00:00
layout: post
slug: c%e8%af%ad%e8%a8%80%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f%e4%b8%8e%e5%bc%ba%e5%bc%b1%e7%ac%a6%e5%8f%b7
title: C语言全局变量与强弱符号
wordpress_id: 407
categories:
- C++&amp;STL
---

刷微博，长知识。酷壳，陈利人等等大牛的微博，细心的读一下，总能学到新知识，复习老知识。

今天，酷壳的一篇C语言全局变量的文章就帮我复习了强弱符号的概念。
[http://coolshell.cn/articles/10115.html](http://coolshell.cn/articles/10115.html)

简单总结如下：

强弱符号的概念：
C语言中，初始化的全局变量和函数是强符号，未初始化的全局变量为弱符号。

这种强弱符号的定义，主要是防止在不同文件中，用相同的变量名来定义全局变量。

有了强弱符号的概念，当全局变量出现冲突的时候，取舍原则如下：



	
  * 不允许出现多个相同强符号。

	
  * 如果有一个强符号和多个弱符号，则选择强符号。

	
  * 如果有多个弱符号，那么先决议到size最大的那个，如果同样大小，则按照链接顺序选择第一个。



这一段转自酷壳原文，在《程序员自我修养》一书中，也陈述过和这段话一致的内容。

不允许的情况，会报错。可选择的情况会报warning，但这种warning是很危险的，这就是好的程序，不能放过一个warning的原因之一。

酷壳的原文举了很多例子来说明这种危险的存在。想了解的可以去看原文，这里不再转载。

我只告诉自己一句，以后定义全局变量，尽量要初始化。这样可以在一定程度上避免强弱符号的冲突问题，同时不要放过任何一个warning。

另外，酷壳的很多文章都提醒我，作为一个程序员，思考一个问题不能停留在sdk，api的层面，要往下想每一个函数的实现，甚至到编译器，链接器的层面，甚至到操作系统内存管理的层面。再往下，硬件调度对程序员来说，大部分就是透明的了。
