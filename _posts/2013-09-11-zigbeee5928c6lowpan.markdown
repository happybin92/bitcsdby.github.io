---
author: bydiao
comments: true
date: 2013-09-11 07:56:15+00:00
layout: post
slug: zigbee%e5%92%8c6lowpan
title: Zigbee和6LoWPAN
wordpress_id: 440
categories:
- C++&amp;STL
- WSN
tags:
- 6lowpan
- wirshark
- Zigbee
---

刚接手一个项目，背景无需多说，直接说要实现的内容：即通过各种协议的sniffer，实现一个多协议无线网络的包统计与解析功能。
这里的多协议，物理层包括780M和2.4G，MAC层有802.15.4和802.11，网络层有Zigbee和6LowPAN。听起来非常复杂，一句话，就是要分析整个网络中各种协议的数据包，做一些统计，绘制拓扑图等。
协议的解析主要用到开源的wireshark，真是一把解码利器，纯C编写，阅读起来略显生涩，但有板有眼。
本文主要谈一下对Zigbee协议和6LowPAN协议的理解

Zigbee协议和6LoWPAN都是适用于低功耗无线传感器网络的协议栈，定义了物理层，链路层，网络层及其上的各层。二者都用了2.4G的物理层和802.15.4的链路层。这是二者的共同之处，另一个共同之处，这两个协议都有各自的组织在推进。

Zigbee协议栈的初衷是设计一套低功耗的无线传感器网络通信协议，协议栈如图所示
![](http://i.imgur.com/4INhPUa.jpg)
但这种协议相对封闭，只能通过网关和中间件和外界通信，而且网络规模受限。

6LowPAN协议栈的设计初衷是借助IPv6丰富的IP资源，试图将无线节点连入互联网
![](http://i.imgur.com/T0vTxll.jpg)
这种协议的出发点很好，但毕竟是低功耗网络，包长度受限，IPv6的包头已经让802.15.4的frame不堪重负，数据部分的吞吐量可想而知。

通过协议栈的图可以发现，6lowpan比Zigbee要清晰一些。wireshark的源码也体现了这点，6LoWPAN的部分，只用两个文件的代码着重解析了网络层，没有涉及别的层，而Zigbee则用到十多个文件，考虑了网络层，一些特殊的子层甚至安全协议等内容。

简单的说，Zigbee更适合低功耗的无线传感器网络，6LoWPAN在扩展性以及方便接入互联网等也有明显优势。二者都在扬长补短。Zigbee
组织已经着手在应用层添加ipv6的解析和封装，即把网络层的事放到应用层做。6LoWPAN组织也在寻找更低功耗的方案，让ipv6和802.15.4配合的更好。相信未来，两个协议的互融将是一个趋势。

